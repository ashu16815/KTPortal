{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/lib/utils.ts"],"sourcesContent":["import type { RAGStatus } from '@/types'\n\n// Normalise any date to the Friday of its ISO week\nexport function normaliseWeekEnding(date: Date | string): Date {\n  const d = typeof date === 'string' ? new Date(date) : new Date(date)\n  // 0=Sun,1=Mon,...,5=Fri,6=Sat\n  const day = d.getDay()\n  const diff = day <= 5 ? 5 - day : 6 // if Saturday, go forward 6 to next Friday\n  d.setDate(d.getDate() + diff)\n  d.setHours(0, 0, 0, 0)\n  return d\n}\n\nexport function formatScore(score: number): string {\n  return `${score}/100`\n}\n\nexport function ragColor(rag: RAGStatus): string {\n  switch (rag) {\n    case 'GREEN': return '#16a34a'\n    case 'AMBER': return '#d97706'\n    case 'RED': return '#dc2626'\n  }\n}\n\nexport function ragBg(rag: RAGStatus): string {\n  switch (rag) {\n    case 'GREEN': return 'bg-green-100 text-green-800'\n    case 'AMBER': return 'bg-amber-100 text-amber-800'\n    case 'RED': return 'bg-red-100 text-red-800'\n  }\n}\n\nexport function formatDate(date: string | Date): string {\n  const d = typeof date === 'string' ? new Date(date) : date\n  return d.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' })\n}\n\nexport function csvExport(headers: string[], rows: (string | number)[][]): string {\n  const escape = (v: string | number) => {\n    const s = String(v)\n    return s.includes(',') || s.includes('\"') || s.includes('\\n')\n      ? `\"${s.replace(/\"/g, '\"\"')}\"`\n      : s\n  }\n  const lines = [headers.map(escape).join(','), ...rows.map(r => r.map(escape).join(','))]\n  return lines.join('\\n')\n}\n\nexport function cn(...classes: (string | undefined | false | null)[]): string {\n  return classes.filter(Boolean).join(' ')\n}\n\nexport function safeParseJSON<T>(json: string | null | undefined, fallback: T): T {\n  if (!json) return fallback\n  try {\n    return JSON.parse(json) as T\n  } catch {\n    return fallback\n  }\n}\n\nexport function getCurrentWeekEnding(): Date {\n  return normaliseWeekEnding(new Date())\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAGO,SAAS,oBAAoB,IAAmB;IACrD,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK;IAC/D,8BAA8B;IAC9B,MAAM,MAAM,EAAE,MAAM;IACpB,MAAM,OAAO,OAAO,IAAI,IAAI,MAAM,EAAE,2CAA2C;;IAC/E,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;IACxB,EAAE,QAAQ,CAAC,GAAG,GAAG,GAAG;IACpB,OAAO;AACT;AAEO,SAAS,YAAY,KAAa;IACvC,OAAO,GAAG,MAAM,IAAI,CAAC;AACvB;AAEO,SAAS,SAAS,GAAc;IACrC,OAAQ;QACN,KAAK;YAAS,OAAO;QACrB,KAAK;YAAS,OAAO;QACrB,KAAK;YAAO,OAAO;IACrB;AACF;AAEO,SAAS,MAAM,GAAc;IAClC,OAAQ;QACN,KAAK;YAAS,OAAO;QACrB,KAAK;YAAS,OAAO;QACrB,KAAK;YAAO,OAAO;IACrB;AACF;AAEO,SAAS,WAAW,IAAmB;IAC5C,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,kBAAkB,CAAC,SAAS;QAAE,KAAK;QAAW,OAAO;QAAS,MAAM;IAAU;AACzF;AAEO,SAAS,UAAU,OAAiB,EAAE,IAA2B;IACtE,MAAM,SAAS,CAAC;QACd,MAAM,IAAI,OAAO;QACjB,OAAO,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,QACpD,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC,GAC5B;IACN;IACA,MAAM,QAAQ;QAAC,QAAQ,GAAG,CAAC,QAAQ,IAAI,CAAC;WAAS,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,GAAG,CAAC,QAAQ,IAAI,CAAC;KAAM;IACxF,OAAO,MAAM,IAAI,CAAC;AACpB;AAEO,SAAS,GAAG,GAAG,OAA8C;IAClE,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC;AAEO,SAAS,cAAiB,IAA+B,EAAE,QAAW;IAC3E,IAAI,CAAC,MAAM,OAAO;IAClB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS;IACd,OAAO,oBAAoB,IAAI;AACjC"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/components/layout/Sidebar.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport type { SessionUser } from '@/types'\nimport { cn } from '@/lib/utils'\n\ninterface NavItem {\n  href: string\n  label: string\n  icon: string\n  roles?: string[]\n}\n\nconst NAV: NavItem[] = [\n  { href: '/dashboard/executive', label: 'Executive', icon: 'üìä', roles: ['ADMIN', 'EXEC'] },\n  { href: '/submissions/new', label: 'Submit Update', icon: 'üìù', roles: ['TWG_LEAD', 'TCS_LEAD', 'TWG_OWNER', 'TCS_OWNER'] },\n  { href: '/submissions/compare', label: 'Compare', icon: '‚öñÔ∏è' },\n  { href: '/actions', label: 'Actions', icon: '‚úÖ' },\n  { href: '/admin', label: 'Admin', icon: '‚öôÔ∏è', roles: ['ADMIN'] },\n]\n\ninterface Props { session: SessionUser }\n\nexport function Sidebar({ session }: Props) {\n  const pathname = usePathname()\n  const visible = NAV.filter(item => !item.roles || item.roles.includes(session.role))\n\n  return (\n    <aside className=\"w-56 bg-slate-900 text-white flex flex-col flex-shrink-0\">\n      <div className=\"p-4 border-b border-slate-700\">\n        <div className=\"font-bold text-lg\">KT Portal</div>\n        <div className=\"text-xs text-slate-400\">Project Aura</div>\n      </div>\n      <nav className=\"flex-1 p-2 space-y-1\">\n        {visible.map(item => (\n          <Link\n            key={item.href}\n            href={item.href}\n            className={cn(\n              'flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors',\n              pathname.startsWith(item.href)\n                ? 'bg-slate-700 text-white'\n                : 'text-slate-300 hover:bg-slate-800 hover:text-white'\n            )}\n          >\n            <span>{item.icon}</span>\n            {item.label}\n          </Link>\n        ))}\n        {session.towerId && (\n          <Link\n            href={`/dashboard/tower/${session.towerId}`}\n            className={cn(\n              'flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors',\n              pathname.includes('/dashboard/tower/')\n                ? 'bg-slate-700 text-white'\n                : 'text-slate-300 hover:bg-slate-800 hover:text-white'\n            )}\n          >\n            <span>üèóÔ∏è</span>\n            My Tower\n          </Link>\n        )}\n      </nav>\n      <div className=\"p-3 border-t border-slate-700\">\n        <div className=\"text-xs text-slate-300 truncate\">{session.name}</div>\n        <div className=\"text-xs text-slate-500\">{session.role} ¬∑ {session.org}</div>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAcA,MAAM,MAAiB;IACrB;QAAE,MAAM;QAAwB,OAAO;QAAa,MAAM;QAAM,OAAO;YAAC;YAAS;SAAO;IAAC;IACzF;QAAE,MAAM;QAAoB,OAAO;QAAiB,MAAM;QAAM,OAAO;YAAC;YAAY;YAAY;YAAa;SAAY;IAAC;IAC1H;QAAE,MAAM;QAAwB,OAAO;QAAW,MAAM;IAAK;IAC7D;QAAE,MAAM;QAAY,OAAO;QAAW,MAAM;IAAI;IAChD;QAAE,MAAM;QAAU,OAAO;QAAS,MAAM;QAAM,OAAO;YAAC;SAAQ;IAAC;CAChE;AAIM,SAAS,QAAQ,EAAE,OAAO,EAAS;IACxC,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,UAAU,IAAI,MAAM,CAAC,CAAA,OAAQ,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,QAAQ,CAAC,QAAQ,IAAI;IAElF,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAoB;;;;;;kCACnC,8OAAC;wBAAI,WAAU;kCAAyB;;;;;;;;;;;;0BAE1C,8OAAC;gBAAI,WAAU;;oBACZ,QAAQ,GAAG,CAAC,CAAA,qBACX,8OAAC,uKAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,IAAA,yHAAE,EACX,0EACA,SAAS,UAAU,CAAC,KAAK,IAAI,IACzB,4BACA;;8CAGN,8OAAC;8CAAM,KAAK,IAAI;;;;;;gCACf,KAAK,KAAK;;2BAVN,KAAK,IAAI;;;;;oBAajB,QAAQ,OAAO,kBACd,8OAAC,uKAAI;wBACH,MAAM,CAAC,iBAAiB,EAAE,QAAQ,OAAO,EAAE;wBAC3C,WAAW,IAAA,yHAAE,EACX,0EACA,SAAS,QAAQ,CAAC,uBACd,4BACA;;0CAGN,8OAAC;0CAAK;;;;;;4BAAU;;;;;;;;;;;;;0BAKtB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAmC,QAAQ,IAAI;;;;;;kCAC9D,8OAAC;wBAAI,WAAU;;4BAA0B,QAAQ,IAAI;4BAAC;4BAAI,QAAQ,GAAG;;;;;;;;;;;;;;;;;;;AAI7E"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/components/layout/TopBar.tsx"],"sourcesContent":["'use client'\n\nimport type { SessionUser } from '@/types'\nimport { useRouter } from 'next/navigation'\n\ninterface Props { session: SessionUser }\n\nexport function TopBar({ session }: Props) {\n  const router = useRouter()\n\n  const handleLogout = async () => {\n    await fetch('/api/auth/logout', { method: 'POST' })\n    document.cookie = 'kt_stub_session=; path=/; max-age=0'\n    router.push('/login')\n  }\n\n  return (\n    <header className=\"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 flex-shrink-0\">\n      <div className=\"text-sm text-gray-500\">\n        Logged in as <span className=\"font-medium text-gray-900\">{session.name}</span>\n      </div>\n      <button\n        onClick={handleLogout}\n        className=\"text-sm text-gray-500 hover:text-gray-900 px-3 py-1.5 rounded border border-gray-200 hover:bg-gray-50 transition-colors\"\n      >\n        Sign out\n      </button>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAOO,SAAS,OAAO,EAAE,OAAO,EAAS;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,eAAe;QACnB,MAAM,MAAM,oBAAoB;YAAE,QAAQ;QAAO;QACjD,SAAS,MAAM,GAAG;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;oBAAwB;kCACxB,8OAAC;wBAAK,WAAU;kCAA6B,QAAQ,IAAI;;;;;;;;;;;;0BAExE,8OAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/hooks/useSession.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport type { SessionUser } from '@/types'\n\nconst COOKIE_NAME = 'kt_stub_session'\n\nexport function useSession() {\n  const [session, setSession] = useState<SessionUser | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const read = () => {\n      try {\n        const match = document.cookie.split('; ').find(c => c.startsWith(`${COOKIE_NAME}=`))\n        if (!match) { setSession(null); return }\n        const value = match.split('=')[1]\n        const decoded = atob(value)\n        setSession(JSON.parse(decoded) as SessionUser)\n      } catch {\n        setSession(null)\n      }\n    }\n    read()\n    setLoading(false)\n  }, [])\n\n  const logout = () => {\n    document.cookie = `${COOKIE_NAME}=; path=/; max-age=0`\n    setSession(null)\n    window.location.href = '/login'\n  }\n\n  return { session, loading, logout }\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAKA,MAAM,cAAc;AAEb,SAAS;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAqB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO;YACX,IAAI;gBACF,MAAM,QAAQ,SAAS,MAAM,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,UAAU,CAAC,GAAG,YAAY,CAAC,CAAC;gBAClF,IAAI,CAAC,OAAO;oBAAE,WAAW;oBAAO;gBAAO;gBACvC,MAAM,QAAQ,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;gBACjC,MAAM,UAAU,KAAK;gBACrB,WAAW,KAAK,KAAK,CAAC;YACxB,EAAE,OAAM;gBACN,WAAW;YACb;QACF;QACA;QACA,WAAW;IACb,GAAG,EAAE;IAEL,MAAM,SAAS;QACb,SAAS,MAAM,GAAG,GAAG,YAAY,oBAAoB,CAAC;QACtD,WAAW;QACX,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,OAAO;QAAE;QAAS;QAAS;IAAO;AACpC"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/components/layout/AppShell.tsx"],"sourcesContent":["'use client'\n\nimport { Sidebar } from './Sidebar'\nimport { TopBar } from './TopBar'\nimport { useSession } from '@/hooks/useSession'\nimport { useRouter } from 'next/navigation'\nimport { useEffect } from 'react'\n\nexport function AppShell({ children }: { children: React.ReactNode }) {\n  const { session, loading } = useSession()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!loading && !session) {\n      router.push('/login')\n    }\n  }, [session, loading, router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin\" />\n      </div>\n    )\n  }\n\n  if (!session) return null\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-gray-50\">\n      <Sidebar session={session} />\n      <div className=\"flex flex-col flex-1 overflow-hidden\">\n        <TopBar session={session} />\n        <main className=\"flex-1 overflow-y-auto p-6\">\n          {children}\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS,SAAS,EAAE,QAAQ,EAAiC;IAClE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAU;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,CAAC,SAAS;YACxB,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAS;QAAS;KAAO;IAE7B,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,kJAAO;gBAAC,SAAS;;;;;;0BAClB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gJAAM;wBAAC,SAAS;;;;;;kCACjB,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/components/ui/Card.tsx"],"sourcesContent":["import { cn } from '@/lib/utils'\n\ninterface CardProps {\n  children: React.ReactNode\n  className?: string\n  padding?: boolean\n  style?: React.CSSProperties\n}\n\nexport function Card({ children, className, padding = true, style }: CardProps) {\n  return (\n    <div className={cn('bg-white rounded-lg border border-gray-200 shadow-sm', padding && 'p-5', className)} style={style}>\n      {children}\n    </div>\n  )\n}\n\nexport function CardHeader({ children, className }: { children: React.ReactNode; className?: string }) {\n  return <div className={cn('mb-4', className)}>{children}</div>\n}\n\nexport function CardTitle({ children, className }: { children: React.ReactNode; className?: string }) {\n  return <h3 className={cn('text-base font-semibold text-gray-900', className)}>{children}</h3>\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;AASO,SAAS,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,IAAI,EAAE,KAAK,EAAa;IAC5E,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,wDAAwD,WAAW,OAAO;QAAY,OAAO;kBAC7G;;;;;;AAGP;AAEO,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAqD;IACnG,qBAAO,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,QAAQ;kBAAa;;;;;;AACjD;AAEO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAqD;IAClG,qBAAO,8OAAC;QAAG,WAAW,IAAA,yHAAE,EAAC,yCAAyC;kBAAa;;;;;;AACjF"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/components/ui/LoadingSpinner.tsx"],"sourcesContent":["import { cn } from '@/lib/utils'\n\nexport function LoadingSpinner({ className }: { className?: string }) {\n  return (\n    <div className={cn('flex items-center justify-center p-8', className)}>\n      <div className=\"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin\" />\n    </div>\n  )\n}\n\nexport function Skeleton({ className }: { className?: string }) {\n  return <div className={cn('animate-pulse bg-gray-200 rounded', className)} />\n}\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,SAAS,eAAe,EAAE,SAAS,EAA0B;IAClE,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,wCAAwC;kBACzD,cAAA,8OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;AAEO,SAAS,SAAS,EAAE,SAAS,EAA0B;IAC5D,qBAAO,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,qCAAqC;;;;;;AACjE"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/323905/Documents/VibeCoding/KTPortal/src/app/admin/page.tsx"],"sourcesContent":["'use client'\n\nimport { useQuery } from '@tanstack/react-query'\nimport { AppShell } from '@/components/layout/AppShell'\nimport { Card, CardHeader, CardTitle } from '@/components/ui/Card'\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner'\nimport Link from 'next/link'\n\ninterface AdminUser {\n  id: string\n  email: string\n  name: string\n  role: string\n  org: string\n  towerId?: string\n  towerName?: string\n  createdAt: string\n}\n\ninterface AdminTower {\n  id: string\n  name: string\n  description?: string\n  createdAt: string\n  updatedAt: string\n  _count?: { users: number; submissions: number }\n}\n\nexport default function AdminPage() {\n  const { data: usersData, isLoading: usersLoading, error: usersError } = useQuery({\n    queryKey: ['admin-users'],\n    queryFn: async () => {\n      const res = await fetch('/api/admin/users', { credentials: 'include' })\n      if (!res.ok) {\n        const err = await res.json().catch(() => ({}))\n        throw new Error(err?.error?.message ?? `HTTP ${res.status}`)\n      }\n      return res.json()\n    },\n    retry: false,\n  })\n\n  const { data: towersData, isLoading: towersLoading, error: towersError } = useQuery({\n    queryKey: ['admin-towers'],\n    queryFn: async () => {\n      const res = await fetch('/api/admin/towers', { credentials: 'include' })\n      if (!res.ok) {\n        const err = await res.json().catch(() => ({}))\n        throw new Error(err?.error?.message ?? `HTTP ${res.status}`)\n      }\n      return res.json()\n    },\n    retry: false,\n  })\n\n  const users: AdminUser[] = usersData?.data ?? []\n  const towers: AdminTower[] = towersData?.data ?? []\n  const isLoading = usersLoading || towersLoading\n  const dbUnavailable = !isLoading && (!!usersError || !!towersError)\n\n  if (isLoading) return <AppShell><LoadingSpinner /></AppShell>\n\n  return (\n    <AppShell>\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Admin</h1>\n          <p className=\"text-sm text-gray-500 mt-1\">Manage users, towers, and system settings</p>\n        </div>\n\n        {dbUnavailable && (\n          <Card className=\"border-amber-200 bg-amber-50\">\n            <CardHeader><CardTitle className=\"text-amber-900\">Database not connected</CardTitle></CardHeader>\n            {(usersError || towersError) && (\n              <p className=\"text-sm text-amber-900 font-medium mb-2\">\n                Error: {(usersError || towersError)?.message}\n              </p>\n            )}\n            <p className=\"text-sm text-amber-800 mb-3\">Azure SQL (or SQL Server) is required for admin data. In stub mode you can still use the app‚Äîlogin users come from the dropdown.</p>\n            <p className=\"text-sm text-amber-800 mb-2 font-medium\">If you just added DATABASE_URL: restart the dev server so it picks up the new env.</p>\n            <ol className=\"text-sm text-amber-800 list-decimal list-inside space-y-1 font-mono\">\n              <li>Copy <code className=\"bg-amber-100 px-1 rounded\">.env.example</code> to <code className=\"bg-amber-100 px-1 rounded\">.env</code> and set <code className=\"bg-amber-100 px-1 rounded\">DATABASE_URL</code> for Azure SQL</li>\n              <li>Format: <code className=\"bg-amber-100 px-1 rounded\">sqlserver://SERVER.database.windows.net:1433;database=DB;user=USER;password=PASS;encrypt=true</code></li>\n              <li>Run <code className=\"bg-amber-100 px-1 rounded\">npm run db:push</code> to create tables</li>\n              <li>Run <code className=\"bg-amber-100 px-1 rounded\">npm run db:seed</code> to seed data</li>\n            </ol>\n          </Card>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between\">\n              <CardTitle>Users</CardTitle>\n              <span className=\"text-sm text-gray-500\">{users.length} total</span>\n            </CardHeader>\n            <div className=\"max-h-64 overflow-y-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"text-left text-gray-500 border-b border-gray-100\">\n                    <th className=\"py-2 pr-3\">Name</th>\n                    <th className=\"py-2 pr-3\">Role</th>\n                    <th className=\"py-2 pr-3\">Org</th>\n                    <th className=\"py-2\">Tower</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {users.map(u => (\n                    <tr key={u.id} className=\"border-b border-gray-50 last:border-0\">\n                      <td className=\"py-2 pr-3\">\n                        <span className=\"font-medium text-gray-900\">{u.name}</span>\n                        <div className=\"text-xs text-gray-400 truncate max-w-[180px]\">{u.email}</div>\n                      </td>\n                      <td className=\"py-2 pr-3 text-gray-600\">{u.role}</td>\n                      <td className=\"py-2 pr-3 text-gray-600\">{u.org}</td>\n                      <td className=\"py-2 text-gray-500\">{u.towerName ?? '‚Äî'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n            {users.length === 0 && (\n              <p className=\"text-sm text-gray-400 py-4\">No users in database. Use stub mode or seed the DB.</p>\n            )}\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between\">\n              <CardTitle>Towers</CardTitle>\n              <span className=\"text-sm text-gray-500\">{towers.length} total</span>\n            </CardHeader>\n            <div className=\"max-h-64 overflow-y-auto space-y-2\">\n              {towers.map(t => (\n                <div key={t.id} className=\"flex items-center justify-between py-2 border-b border-gray-50 last:border-0\">\n                  <div>\n                    <div className=\"font-medium text-gray-900\">{t.name}</div>\n                    {t.description && <div className=\"text-xs text-gray-500\">{t.description}</div>}\n                    {(t._count?.users ?? 0) > 0 && (\n                      <div className=\"text-xs text-gray-400 mt-0.5\">\n                        {t._count?.users} users ¬∑ {t._count?.submissions ?? 0} submissions\n                      </div>\n                    )}\n                  </div>\n                  <Link\n                    href={`/dashboard/tower/${t.id}`}\n                    className=\"text-sm text-blue-600 hover:underline\"\n                  >\n                    View\n                  </Link>\n                </div>\n              ))}\n            </div>\n            {towers.length === 0 && (\n              <p className=\"text-sm text-gray-400 py-4\">No towers. Run <code className=\"bg-gray-100 px-1 rounded\">npm run db:seed</code> to populate.</p>\n            )}\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Quick links</CardTitle>\n          </CardHeader>\n          <div className=\"flex flex-wrap gap-3\">\n            <Link href=\"/dashboard/executive\" className=\"text-blue-600 hover:underline text-sm\">\n              Executive Dashboard ‚Üí\n            </Link>\n            <Link href=\"/submissions/compare\" className=\"text-blue-600 hover:underline text-sm\">\n              Compare submissions ‚Üí\n            </Link>\n          </div>\n        </Card>\n      </div>\n    </AppShell>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}